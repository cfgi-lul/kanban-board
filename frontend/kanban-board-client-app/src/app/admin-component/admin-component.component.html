<!-- File: ./app/admin/admin.component.html -->
<mat-card class="admin-panel">
  <mat-card-header>
    <mat-card-title>{{ 'admin.userManagement' | translate }}</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <table mat-table [dataSource]="users$ | async">
      <!-- ID Column -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>{{ 'common.id' | translate }}</th>
        <td mat-cell *matCellDef="let user">{{ user.id }}</td>
      </ng-container>

      <!-- Username Column -->
      <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef>
          {{ 'auth.username' | translate }}
        </th>
        <td mat-cell *matCellDef="let user">{{ user.username }}</td>
      </ng-container>

      <!-- Display Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>
          {{ 'settings.displayName' | translate }}
        </th>
        <td mat-cell *matCellDef="let user">{{ user.displayName || user.name || '-' }}</td>
      </ng-container>

      <!-- Roles Column -->
      <ng-container matColumnDef="roles">
        <th mat-header-cell *matHeaderCellDef>
          {{ 'admin.roles' | translate }}
        </th>
        <td mat-cell *matCellDef="let user">
          {{ user.roles?.join(', ') || ('common.user' | translate) }}
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>
          {{ 'common.actions' | translate }}
        </th>
        <td mat-cell *matCellDef="let user">
          <button
            mat-icon-button
            (click)="promoteToAdmin(user.id!)"
            [matTooltip]="'admin.promoteToAdmin' | translate"
          >
            <mat-icon>admin_panel_settings</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </mat-card-content>
</mat-card>
