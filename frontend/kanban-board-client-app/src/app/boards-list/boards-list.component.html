<div class="boards-list">
  <mat-form-field appearance="outline" class="boards-list__search">
    <mat-label class="boards-list__search-label">{{
      'board.searchBoards' | translate
    }}</mat-label>
    <input
      matInput
      class="boards-list__search-input"
      [value]="searchTerm()"
      (input)="onSearchChange($event)"
      [placeholder]="'board.enterBoardName' | translate"
      type="text"
    />
    <mat-icon matSuffix class="boards-list__search-icon">search</mat-icon>
    @if (searchTerm()) {
      <button
        matSuffix
        mat-icon-button
        class="boards-list__search-clear"
        (click)="clearSearch()"
        [attr.aria-label]="'common.clearSearch' | translate"
      >
        <mat-icon class="boards-list__search-clear-icon">close</mat-icon>
      </button>
    }
  </mat-form-field>

  @if (isLoading()) {
    <div class="boards-list__loading">
      <mat-spinner
        diameter="50"
        class="boards-list__loading-spinner"
      ></mat-spinner>
      <div class="boards-list__loading-text">
        {{ 'board.loadingBoards' | translate }}
      </div>
    </div>
  }

  @if (hasError()) {
    <kn-error-display
      [errorMessage]="'board.failedToLoadBoards' | translate"
      [errorDetails]="'board.errorLoadingBoards' | translate"
      (onRetry)="retryLoad()"
    />
  }

  @if (isFulfilled()) {
    <div class="boards-list__content">
      @if (filteredBoards().length === 0 && searchTerm()) {
        <kn-no-content
          [message]="'board.noBoardsFound' | translate"
          [details]="'board.noBoardsMatchSearch' | translate"
          [icon]="'search_off'"
          [showActionButton]="true"
          [actionButtonText]="'common.clearSearch' | translate"
          (onAction)="clearSearch()"
        />
      }

      @if (filteredBoards().length > 0) {
        <div class="boards-list__grid">
          @for (board of filteredBoards(); track board.id) {
            <kn-board-card
              class="boards-list__card"
              [board]="board"
              (onBoardOpened)="openBoard(board.id)"
            />
          }
        </div>
      }

      <kn-add-board-card
        class="boards-list__add-card"
        (onBoardCreate)="addBoard()"
      />
    </div>
  }
</div>
