<div class="auth">
  <mat-card class="auth__card">
    <mat-card-header class="auth__header">
      <div class="auth__logo">
        <mat-icon class="auth__logo-icon">dashboard</mat-icon>
        <div class="auth__logo-text">{{ 'header.brandTitle' | translate }}</div>
      </div>
      <mat-card-subtitle class="auth__subtitle">{{
        'auth.welcomeBack' | translate
      }}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content class="auth__content" [formGroup]="signInForm">
      <mat-form-field appearance="outline" class="auth__form-field">
        <mat-label>{{ 'auth.username' | translate }}</mat-label>
        <input
          matInput
          formControlName="userName"
          [placeholder]="'auth.enterUsername' | translate"
          [errorStateMatcher]="matcher"
          autocomplete="username"
        />
        <mat-icon matSuffix>person</mat-icon>
        @if (
          signInForm.get('userName')?.invalid &&
          signInForm.get('userName')?.touched
        ) {
          <mat-error>{{ getErrorMessage('userName', signInForm) }}</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="auth__form-field">
        <mat-label>{{ 'auth.password' | translate }}</mat-label>
        <input
          matInput
          formControlName="password"
          type="password"
          [placeholder]="'auth.enterPassword' | translate"
          [errorStateMatcher]="matcher"
          autocomplete="current-password"
        />
        <mat-icon matSuffix>lock</mat-icon>
        @if (
          signInForm.get('password')?.invalid &&
          signInForm.get('password')?.touched
        ) {
          <mat-error>{{ getErrorMessage('password', signInForm) }}</mat-error>
        }
      </mat-form-field>

      <button
        mat-raised-button
        color="primary"
        (click)="onSignIn()"
        [disabled]="signInForm.invalid || isSignInLoading"
        class="auth__submit-button"
      >
        @if (isSignInLoading) {
          <mat-spinner diameter="20" class="auth__button-spinner" />
          <span>{{ 'auth.signingIn' | translate }}</span>
        } @else {
          <span>{{ 'auth.signIn' | translate }}</span>
        }
      </button>

      <div class="auth__footer">
        <div class="auth__footer-text">
          {{ 'auth.newToKanban' | translate }}
          <a routerLink="/auth/sign-up" class="auth__footer-link">{{
            'auth.createAccount' | translate
          }}</a>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
